# Alembic Config file for brAInwav API
# This configuration assumes this file is located at the project root.

[alembic]
# Path to migration scripts
# This typically points to a directory (e.g., 'alembic') that will contain
# the auto-generated migration files and the 'env.py' script.
script_location = alembic

# Template used to generate migration file names
file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# Timezone to use when rendering the date within the migration file as well as the filename.
# It's recommended to use 'utc' for consistency across deployments.
timezone = utc

# Max length of characters to apply to the "slug" field (the descriptive part of the migration file name)
truncate_slug_length = 40

# Set to 'true' to run the environment during the 'revision' command, regardless of autogenerate
revision_environment = false

# Set to 'true' to allow .pyc and .pyo files without a source .py file to be detected as revisions in the versions/ directory. Generally kept false.
sourceless = false

# Version path separator. Use 'os' for OS-specific separator.
version_path_separator = os

# The output encoding used when revision files are written from script.py.mako
output_encoding = utf-8

# --- Database Connection URL ---
# IMPORTANT: This URL is primarily for Alembic CLI commands (e.g., 'alembic upgrade head').
# For the application itself, DATABASE_URL is loaded via Pydantic Settings.
# To ensure Alembic connects to the correct PostgreSQL database as defined in your .env file (DATABASE_URL),
# you should configure 'alembic/env.py' to read the DATABASE_URL from environment variables.
# A common pattern in 'alembic/env.py' is:
#   from os import environ
#   config.set_main_option("sqlalchemy.url", environ.get("DATABASE_URL"))
# Set a placeholder here or remove if env.py always provides it.
# If you run 'alembic' commands, ensure DATABASE_URL is set in your shell environment.
# Example for direct setting (less flexible for different environments):
# sqlalchemy.url = postgresql://brainwav_user:your_secure_db_password_here@db:5432/brainwav_db
sqlalchemy.url =
